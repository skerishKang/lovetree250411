{"version":3,"file":"CreateTree-DsQFbAWa.js","sources":["../../src/pages/CreateTree.tsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addNotification } from '@/features/notifications/notificationsSlice';\r\nimport api from '@/utils/axios';\r\n\r\nconst CreateTree = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [treeData, setTreeData] = useState({\r\n    title: '',\r\n    description: '',\r\n    isPublic: true\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      console.log('[트리 생성 요청]', treeData);\r\n      const response = await api.post('/trees', treeData);\r\n      const data = response.data;\r\n      console.log('[트리 생성 응답]', data);\r\n\r\n      const treeId = data.id || data._id;\r\n      if (!treeId) {\r\n        throw new Error('생성된 트리의 ID를 찾을 수 없습니다.');\r\n      }\r\n\r\n      console.log('[트리 생성 성공] treeId:', treeId);\r\n\r\n      dispatch(addNotification({\r\n        _id: Date.now().toString(),\r\n        type: 'custom',\r\n        message: '트리가 성공적으로 생성되었습니다!',\r\n        read: false,\r\n        createdAt: new Date().toISOString(),\r\n      }));\r\n\r\n      navigate(`/trees/${treeId}/edit`);\r\n    } catch (error: any) {\r\n      console.error('트리 생성 오류:', error);\r\n      dispatch(addNotification({\r\n        _id: Date.now().toString(),\r\n        type: 'custom',\r\n        message: error.response?.data?.message || error.message || '트리 생성에 실패했습니다. 다시 시도해주세요.',\r\n        read: false,\r\n        createdAt: new Date().toISOString(),\r\n      }));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"create-tree-container min-h-screen w-full max-w-full p-2 sm:p-4 overflow-x-auto\">\r\n      <div className=\"bg-white rounded-lg shadow p-4 w-full max-w-2xl mx-auto flex flex-col gap-4\">\r\n        <h1 className=\"text-2xl font-bold mb-6\">새 트리 만들기</h1>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\r\n          <div>\r\n            <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              트리 이름\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              value={treeData.title}\r\n              onChange={(e) => setTreeData({ ...treeData, title: e.target.value })}\r\n              className=\"w-full py-2 px-4 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"트리의 이름을 입력하세요\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              트리 설명\r\n            </label>\r\n            <textarea\r\n              id=\"description\"\r\n              value={treeData.description}\r\n              onChange={(e) => setTreeData({ ...treeData, description: e.target.value })}\r\n              className=\"w-full py-2 px-4 text-base border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"트리에 대한 설명을 입력하세요\"\r\n              rows={4}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"isPublic\"\r\n              checked={treeData.isPublic}\r\n              onChange={(e) => setTreeData({ ...treeData, isPublic: e.target.checked })}\r\n              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n            />\r\n            <label htmlFor=\"isPublic\" className=\"ml-2 block text-sm text-gray-700\">\r\n              공개 트리로 만들기\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => navigate(-1)}\r\n              className=\"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300\"\r\n              disabled={isLoading}\r\n            >\r\n              취소\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full sm:w-auto py-2 px-4 text-base bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-blue-300\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? '생성 중...' : '트리 만들기'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateTree; "],"names":["CreateTree","navigate","useNavigate","dispatch","useDispatch","treeData","setTreeData","useState","isLoading","setIsLoading","handleSubmit","e","data","api","treeId","addNotification","error","_b","_a","jsxs","jsx"],"mappings":"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"}
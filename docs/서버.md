# 서버 관련 구조 및 기능

## 1. 주요 서버 파일

### (1) backend/server.js
- Express 기반 메인 서버 진입점
- 환경 변수 로드, 미들웨어/라우트/정적 파일/웹소켓/로깅 등 전체 서버 초기화 및 실행 담당
- 웹소켓(socket.io) 및 ngrok 연동 지원

### (2) backend/app.js
- Express 앱 인스턴스 및 미들웨어, 라우트 등록, 에러 핸들링 등 서버의 핵심 로직 담당
- server.js에서 불러와 실제 서버로 사용

### (3) start-service.js (루트)
- 백엔드 서버(server.js)와 ngrok을 동시에 실행하는 Node.js 스크립트
- SIGINT(CTRL+C) 시 두 프로세스 모두 종료

## 2. 서버 실행 흐름

1. **server.js**  
   - app.js를 불러와 서버 인스턴스 생성 및 실행
   - 웹소켓, 포트, 로깅, 정적 파일, 미들웨어, 라우트 등 전체 초기화

2. **app.js**  
   - 미들웨어, 라우트, 에러 핸들링 등 Express 앱의 핵심 로직 담당

3. **start-service.js**  
   - node server.js로 서버 실행 후, ngrok을 통해 외부 공개(포트 포워딩)
   - 서버와 ngrok 프로세스를 동시에 관리

## 3. 기타

- 서버 실행은 backend/server.js 또는 루트의 start-service.js로 가능
- 포트, URL 등은 backend/config/ports.js에서 관리
- 환경 변수는 .env에서 관리 
import{c as j,r as l,d as g,j as e,K as w}from"./index-Bv4-c3_I.js";const N=()=>{const p=j(),[r,u]=l.useState(""),[d,o]=l.useState(null),[m,i]=l.useState(null),a=l.useRef(null),{loading:h}=g(t=>t.posts),{user:f}=g(t=>t.auth),b=async t=>{if(t.preventDefault(),!r.trim())return;const s=new FormData;s.append("content",r),d&&s.append("image",d);try{await p(w(s)).unwrap(),u(""),o(null),i(null),a.current&&(a.current.value="")}catch(n){console.error("게시물 작성 실패:",n)}},x=t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(s){o(s);const c=new FileReader;c.onloadend=()=>{i(c.result)},c.readAsDataURL(s)}},v=()=>{o(null),i(null),a.current&&(a.current.value="")};return f?e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:e.jsxs("form",{onSubmit:b,children:[e.jsx("textarea",{value:r,onChange:t=>u(t.target.value),placeholder:"무슨 생각을 하고 계신가요?",className:"w-full p-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4}),m&&e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:m,alt:"미리보기",className:"w-full rounded-lg",loading:"lazy"}),e.jsx("button",{type:"button",onClick:v,className:"absolute top-2 right-2 p-1 bg-black bg-opacity-50 rounded-full text-white hover:bg-opacity-70",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:x,ref:a,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"p-2 text-gray-500 hover:text-blue-500 cursor-pointer",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),e.jsx("button",{type:"submit",disabled:h||!r.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-300",children:h?"게시 중...":"게시하기"})]})]})}):null};export{N as default};
//# sourceMappingURL=CreatePost-BrlQG9QN.js.map
